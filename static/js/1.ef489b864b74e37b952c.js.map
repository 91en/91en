{"version":3,"sources":["webpack:///src/base/mv-grid/mv-grid.vue","webpack:///./src/base/mv-grid/mv-grid.vue?36f1","webpack:///./src/base/mv-grid/mv-grid.vue","webpack:///./src/common/js/record.js","webpack:///src/components/result-display/result-display.vue","webpack:///./src/api/search.js","webpack:///./src/components/result-display/result-display.vue?bbfd","webpack:///./src/components/result-display/result-display.vue"],"names":["mv_grid","created","this","rowNum","Math","ceil","dataList","length","eachRowNum","data","displayIdx1","displayIdx2","props","type","Array","default","Number","methods","displayBlock","idx1","idx2","hideBlock","selected","item","$emit","watch","newList","computed","eachRowList","list","i","temp","slice","push","mv_grid_mv_grid","render","_vm","_h","$createElement","_c","_self","staticClass","_l","key","attrs","span","nativeOn","mouseenter","$event","mouseleave","click","src","picUrl","_v","directives","name","rawName","value","expression","title","_s","singer","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Record","_ref","count","category","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","ret","searchCategory","song","forEach","songObj","splitSingersInObj","ar","id","album","al","duration","dt","albumPic","albumId","Song","singerObj","img1v1Url","Singer","songList","songListObj","coverImgUrl","desc","description","SongList","AlbumObj","company","artists","Album","mv","mvObj","cover","MV","SONG_PER_PAGE","OTHERS_PER_PAGE","result_display","searchKeywords","_search","perPage","beforeRouteEnter","to","from","next","vm","setCurrentPage","$router","path","pagerDisplay","isNotFound","recordCount","displayList","isLoading","eachLength","extends_default","keywords","page","_this","pageSize","url","baseUrl","keyword","axios","get","concatUrl","search","then","res","code","config","dataHandler","searchResult","analyzeSearchData","setSearchResult","result","songCount","artistCount","playlistCount","albumCount","mvCount","dataArr","songs","playlists","albums","mvs","record","js_config","setSinger","setSongList","setAlbum","selectedMV","setCurrentMV","Object","vuex_esm","setMV","currentPage","newVal","isTag","components","List","Grid","grid","Pagination","pagination","MvGrid","result_display_result_display","_e","each-length","on","total"],"mappings":"8FA0BA,IAAAA,GACAC,QADA,WAEAC,KAAAC,OAAAC,KAAAC,KAAAH,KAAAI,SAAAC,OAAAL,KAAAM,aAEAC,KAJA,WAKA,OACAC,aAAA,EACAC,aAAA,EACAR,OAAA,IAGAS,OACAN,UACAO,KAAAC,MACAC,QAAA,sBAEAP,YACAK,KAAAG,OACAD,QAAA,IAGAE,SACAC,aADA,SACAC,EAAAC,GACAlB,KAAAQ,YAAAS,EACAjB,KAAAS,YAAAS,GAEAC,UALA,WAMAnB,KAAAQ,aAAA,EACAR,KAAAS,aAAA,GAEAW,SATA,SASAC,GACArB,KAAAsB,MAAA,WAAAD,KAGAE,OACAnB,SADA,SACAoB,GACA,IAAAA,EAAAnB,SACAL,KAAAC,OAAAC,KAAAC,KAAAH,KAAAI,SAAAC,OAAAL,KAAAM,eAGAmB,UACAC,YADA,WAGA,IADA,IAAAC,KACAC,EAAA,EAAAA,EAAA5B,KAAAM,WAAAsB,IAAA,CACA,IAAAC,KAEAA,GADAD,EAAA,GAAA5B,KAAAM,WAAAN,KAAAI,SAAAC,OACAL,KAAAI,SAAA0B,MAAAF,GAEA5B,KAAAI,SAAA0B,MAAAF,EAAA5B,KAAAM,YAAAsB,EAAA,GAAA5B,KAAAM,YAEAqB,EAAAI,KAAAF,GAEA,OAAAF,KC3EeK,GADEC,OAFjB,WAA0B,IAAAC,EAAAlC,KAAamC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBE,YAAA,kBAA6BL,EAAAM,GAAAN,EAAA,gBAAAjB,GAAoC,OAAAoB,EAAA,UAAoBI,IAAAxB,EAAAsB,YAAA,qBAAyCL,EAAAM,GAAAN,EAAAR,YAAAT,EAAA,YAAAI,EAAAH,GAAsD,OAAAmB,EAAA,UAAoBI,IAAAvB,EAAAqB,YAAA,UAAAG,OAAsCC,KAAA,GAAAT,EAAA5B,YAAyBsC,UAAWC,WAAA,SAAAC,GAA8B,OAAAZ,EAAAlB,aAAAC,EAAAC,IAAmC6B,WAAA,SAAAD,GAA+B,OAAAZ,EAAAf,UAAA2B,IAA6BE,MAAA,SAAAF,GAA0B,OAAAZ,EAAAd,SAAAC,OAA4BgB,EAAA,OAAYE,YAAA,QAAkBF,EAAA,OAAYK,OAAOO,IAAA5B,EAAA6B,UAAmBhB,EAAAiB,GAAA,KAAAd,EAAA,OAAwBe,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAtC,IAAAiB,EAAA1B,aAAAU,IAAAgB,EAAAzB,YAAA+C,WAAA,2CAAwIjB,YAAA,gBAA4BF,EAAA,KAAUE,YAAA,yCAA+CL,EAAAiB,GAAA,KAAAd,EAAA,KAA0BE,YAAA,UAAAG,OAA6Be,MAAApC,EAAAgC,QAAmBnB,EAAAiB,GAAAjB,EAAAwB,GAAArC,EAAAgC,SAAAnB,EAAAiB,GAAA,KAAAd,EAAA,KAAkDE,YAAA,YAAAG,OAA+Be,MAAApC,EAAAsC,UAAqBzB,EAAAiB,GAAAjB,EAAAwB,GAAArC,EAAAsC,eAAkC,KAAK,IAE9jCC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEjE,EACAkC,GATF,EAVA,SAAAgC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,EAAAJ,EAAiB,6OCZXK,aACnB,SAAAA,EAAAC,GAIG,IAHDC,EAGCD,EAHDC,MACAC,EAECF,EAFDE,SACA9D,EACC4D,EADD5D,KACC+D,IAAAtE,KAAAkE,GACDlE,KAAKoE,MAAQA,EACbpE,KAAKqE,SAAWA,EAChBrE,KAAKO,KAAOA,wDAGK8D,GACjB,IAAIE,KACJ,OAAIvE,KAAKqE,WAAaG,IAAeC,MAC/BJ,IAAaG,IAAeC,MAC9BzE,KAAKO,KAAKmE,QAAQ,SAACrD,GACjB,IAAIsD,KACJA,EAAQtB,KAAOhC,EAAKgC,KACpBsB,EAAQhB,OAASiB,YAAkBvD,EAAKwD,IACxCF,EAAQG,GAAKzD,EAAKyD,GAClBH,EAAQI,MAAQ1D,EAAK2D,GAAG3B,KACxBsB,EAAQM,SAAW5D,EAAK6D,GACxBP,EAAQQ,SAAW9D,EAAK2D,GAAG9B,OAC3ByB,EAAQS,QAAU/D,EAAK2D,GAAGF,GAC1BP,EAAIxC,KAAK,IAAIsD,IAAKV,MAEbJ,GAGPF,IAAaG,IAAeb,QAC9B3D,KAAKO,KAAKmE,QAAQ,SAACrD,GACjB,IAAIiE,KACJA,EAAUjC,KAAOhC,EAAKgC,KACtBiC,EAAUR,GAAKzD,EAAKyD,GACpBQ,EAAUC,UAAYlE,EAAKkE,UAC3BhB,EAAIxC,KAAK,IAAIyD,IAAOF,MAEff,GAELF,IAAaG,IAAeiB,UAC9BzF,KAAKO,KAAKmE,QAAQ,SAACrD,GACjB,IAAIqE,KACJA,EAAYrC,KAAOhC,EAAKgC,KACxBqC,EAAYZ,GAAKzD,EAAKyD,GACtBY,EAAYxC,OAAS7B,EAAKsE,YAC1BD,EAAYE,KAAOvE,EAAKwE,YACxBtB,EAAIxC,KAAK,IAAI+D,IAASJ,MAEjBnB,GAELF,IAAaG,IAAeO,OAC9B/E,KAAKO,KAAKmE,QAAQ,SAACrD,GACjB,IAAI0E,KACJA,EAAS1C,KAAOhC,EAAKgC,KACrB0C,EAASjB,GAAKzD,EAAKyD,GACnBiB,EAAS7C,OAAS7B,EAAK6B,OACvB6C,EAASH,KAAOvE,EAAKwE,YACrBE,EAASC,QAAU3E,EAAK2E,QACxBD,EAASpC,OAASiB,YAAkBvD,EAAK4E,SACzC1B,EAAIxC,KAAK,IAAImE,IAAMH,MAEdxB,GAELF,IAAaG,IAAe2B,IAC9BnG,KAAKO,KAAKmE,QAAQ,SAACrD,GACjB,IAAI+E,KACJA,EAAM/C,KAAOhC,EAAKgC,KAClB+C,EAAMtB,GAAKzD,EAAKyD,GAChBsB,EAAMC,MAAQhF,EAAKgF,MACnBD,EAAMzC,OAASiB,YAAkBvD,EAAK4E,SACtC1B,EAAIxC,KAAK,IAAIuE,IAAGF,MAEX7B,QATT,iBAcG,IAAMgC,EAAgB,GAChBC,EAAkB,uPCnD/BC,GACA1G,QADA,WAEAC,KAAA0G,eAAArG,QAAAL,KAAAwE,eAIAxE,KAAA2G,QAAA3G,KAAA0G,eAAA1G,KAAAwE,eAAA,EAAAxE,KAAA4G,SAHA5G,KAAAsB,MAAA,cAKAuF,iBARA,SAQAC,EAAAC,EAAAC,GACAA,EAAA,SAAAC,GACAA,EAAAP,eAAArG,QAAA4G,EAAAzC,eAMAyC,EAAAC,eAAA,GALAD,EAAAE,QAAApF,MACAqF,KAAA,eAOA7G,KAnBA,WAoBA,OACA8G,aAAA,EACAC,YAAA,EACAC,YAAA,EACAC,eACAC,WAAA,EACAC,WAAA,IAGA3G,QAAW4G,KACXhB,QADA,SACAiB,EAAAvD,EAAAwD,EAAAjB,GAAA,IAAAkB,EAAA9H,KACAA,KAAAyH,WAAA,EC5DO,SAAgBG,EAAUvD,EAAUwD,EAAME,GAC/C,IAAMC,EAAMC,IAAU,iBAChB1H,GACJ2H,QAASN,EACTjH,KAAM0D,IAAaG,IAAeC,KAAO,OAASJ,IAAaG,IAAeb,OAAS,SAAWU,IAAaG,IAAeO,MAAQ,QAAUV,IAAaG,IAAeiB,SAAW,WAAa,KACpMoC,KAAMA,EAAOE,GAAY,EACzBA,SAAUA,GAEZ,OAAOI,IAAMC,IAAIC,YAAUL,EAAKzH,IDqD5B+H,CAANV,EAAAvD,EAAAwD,EAAAjB,GAAA2B,KAAA,SAAAC,GACAA,EAAAjI,KAAAkI,OAAAC,EAAA,GAAAF,EAAAjI,WACAuH,EAAAa,YAAAH,EAAAjI,WACAuH,EAAAN,YAAAM,EAAAc,aAAAC,kBAAAxE,GACAyD,EAAAL,WAAA,IAEAK,EAAAL,WAAA,EACAK,EAAAR,YAAA,EACAQ,EAAAgB,wBAIAH,YAfA,SAeApI,GACA,IAAAwI,EAAAxI,EACAP,KAAAuH,YACAwB,EAAAC,WACAD,EAAAE,aACAF,EAAAG,eACAH,EAAAI,YACAJ,EAAAK,SACA,EACA,IAAAC,EACAN,EAAAO,OACAP,EAAA9C,SACA8C,EAAAQ,WACAR,EAAAS,QACAT,EAAAU,IACAzJ,KAAA8I,gBACA,IAAAY,EAAA,GACAtF,MAAApE,KAAAuH,YACAlD,SAAArE,KAAAwE,eACAjE,KAAA8I,MAIAjI,SAtCA,SAsCAC,GACArB,KAAAwE,iBAAAmF,EAAA,EAAAhG,SACA3D,KAAA4J,UAAAvI,GACArB,KAAAmH,QAAApF,MACAqF,KAAA,WAAA/F,EAAAyD,MAGA9E,KAAAwE,iBAAAmF,EAAA,EAAAlE,WACAzF,KAAA6J,YAAAxI,GACArB,KAAAmH,QAAApF,MACAqF,KAAA,aAAA/F,EAAAyD,MAGA9E,KAAAwE,iBAAAmF,EAAA,EAAA5E,QACA/E,KAAA8J,SAAAzI,GACArB,KAAAmH,QAAApF,MACAqF,KAAA,gBAAA/F,EAAAyD,MAGA9E,KAAAwE,iBAAAmF,EAAA,EAAA5E,QACA/E,KAAA8J,SAAAzI,GACArB,KAAAmH,QAAApF,MACAqF,KAAA,gBAAA/F,EAAAyD,OAIAiF,WAhEA,SAgEA5D,GAEAnG,KAAAgK,aAAA7D,GACAnG,KAAAmH,QAAApF,MACAqF,KAAA,aAAAjB,EAAArB,OAGAmF,OAAAC,EAAA,EAAAD,EACAnB,gBAAA,oBACAc,UAAA,aACAC,YAAA,wBACAC,SAAA,oBACAK,MAAA,iBACAjD,eAAA,mBACA8C,aAAA,oBAGAzI,OACA6I,YADA,SACAC,GACArK,KAAA2G,QACA3G,KAAA0G,eACA1G,KAAAwE,eACA6F,EACArK,KAAA4G,UAGAF,eATA,SASA2D,GACArK,KAAA2G,QAAA0D,EAAArK,KAAAwE,eAAA,EAAAxE,KAAA4G,UAEApC,eAZA,SAYA6F,GACArK,KAAA2G,QAAA3G,KAAA0G,eAAA2D,EAAA,EAAArK,KAAA4G,WAGAnF,SAAYkG,KACZf,QADA,WAEA,OAAA5G,KAAAwE,iBAAAmF,EAAA,EAAAlF,KACAiF,EAAA,EACAA,EAAA,GAEAY,MANA,WAOA,OAAAtK,KAAAwE,iBAAAmF,EAAA,EAAA5E,QAEAkF,OAAAC,EAAA,EAAAD,EACA,iBACA,iBACA,cACA,kBAGAM,YACAC,KAAA7I,EAAA,EACA8I,KAAAC,EAAA,EACAC,WAAAC,EAAA,EACAC,OAAA/K,EAAA,IExLegL,GADE7I,OAFjB,WAA0B,IAAAC,EAAAlC,KAAamC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBE,YAAA,qBAA+BL,EAAA,WAAAG,EAAA,UAAgCE,YAAA,oCAA8CL,EAAAiB,GAAA,iBAAAjB,EAAA6I,KAAA7I,EAAAiB,GAAA,KAAAd,EAAA,UAA4De,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAArB,EAAA,UAAAsB,WAAA,cAA4EH,KAAA,UAAAC,QAAA,YAAAC,MAAArB,EAAA,UAAAsB,WAAA,cAAgFjB,YAAA,gBAA4BL,EAAAiB,GAAA,KAAAd,EAAA,UAA2Be,aAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAArB,EAAAoF,aAAApF,EAAAuF,UAAAjE,WAAA,4BAA0GjB,YAAA,WAAuBF,EAAA,UAAeE,YAAA,iBAA2BF,EAAA,UAAeK,OAAOC,KAAA,GAAAZ,KAAA,KAAoBG,EAAAiB,GAAA,OAAAjB,EAAAwB,GAAAxB,EAAAwE,gBAAA,UAAAxE,EAAAwB,GAAAxB,EAAAqF,aAAA,WAAArF,EAAAiB,GAAA,SAAAjB,EAAAsC,eAAAnC,EAAA,UAA4IK,OAAOX,KAAA,EAAAY,KAAA,MAAoBN,EAAA,QAAaK,OAAOtC,SAAA8B,EAAAsF,gBAA4B,GAAAtF,EAAA6I,KAAA7I,EAAAiB,GAAA,SAAAjB,EAAAsC,gBAAA,IAAAtC,EAAAsC,gBAAA,IAAAtC,EAAAsC,eAAAnC,EAAA,UAAiHK,OAAOX,KAAA,EAAAY,KAAA,MAAoBN,EAAA,QAAaK,OAAOtC,SAAA8B,EAAAsF,YAAAwD,cAAA9I,EAAAwF,WAAA4C,MAAApI,EAAAoI,OAA0EW,IAAK7J,SAAAc,EAAAd,aAAyB,GAAAc,EAAA6I,KAAA7I,EAAAiB,GAAA,SAAAjB,EAAAsC,eAAAnC,EAAA,UAAiEK,OAAOX,KAAA,EAAAY,KAAA,MAAoBN,EAAA,WAAgBK,OAAOtC,SAAA8B,EAAAsF,aAA2ByD,IAAK7J,SAAAc,EAAA6H,eAA2B,GAAA7H,EAAA6I,KAAA7I,EAAAiB,GAAA,KAAAd,EAAA,UAAwCE,YAAA,QAAAG,OAA2BX,KAAA,KAAUM,EAAA,cAAmBK,OAAOwI,MAAAhJ,EAAA0G,aAAAxE,MAAA2D,SAAA7F,EAAA0E,YAAuD,YAEl/ChD,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE0C,EACAqE,GATF,EAVA,SAAA9G,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/1.ef489b864b74e37b952c.js","sourcesContent":["<template>\r\n  <el-row class=\"grid-container\">\r\n    <el-row v-for=\"idx1 in rowNum\" :key=\"idx1\" class=\"mv-item-container\">\r\n      <el-col\r\n        v-for=\"(item,idx2) in eachRowList[idx1-1]\"\r\n        :key=\"idx2\"\r\n        :span=\"24/eachRowNum\"\r\n        class=\"mv-item\"\r\n        @mouseenter.native=\"displayBlock(idx1,idx2)\"\r\n        @mouseleave.native=\"hideBlock\"\r\n        @click.native=\"selected(item)\"\r\n      >\r\n        <div class=\"pic\">\r\n          <img :src=\"item.picUrl\">\r\n          <div class=\"block-layer\" v-show=\"idx1===displayIdx1&&idx2===displayIdx2\">\r\n            <p class=\"layer-play iconfont icon-zanting\"></p>\r\n          </div>\r\n        </div>\r\n        <p class=\"mv-name\" :title=\"item.name\">{{item.name}}</p>\r\n        <p class=\"mv-singer\" :title=\"item.singer\">{{item.singer}}</p>\r\n      </el-col>\r\n    </el-row>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  created() {\r\n    this.rowNum = Math.ceil(this.dataList.length / this.eachRowNum)\r\n  },\r\n  data() {\r\n    return {\r\n      displayIdx1: -1,\r\n      displayIdx2: -1,\r\n      rowNum: 0\r\n    }\r\n  },\r\n  props: {\r\n    dataList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    eachRowNum: {\r\n      type: Number,\r\n      default: 4\r\n    }\r\n  },\r\n  methods: {\r\n    displayBlock(idx1, idx2) {\r\n      this.displayIdx1 = idx1\r\n      this.displayIdx2 = idx2\r\n    },\r\n    hideBlock() {\r\n      this.displayIdx1 = -1\r\n      this.displayIdx2 = -1\r\n    },\r\n    selected(item) {\r\n      this.$emit('selected', item)\r\n    }\r\n  },\r\n  watch: {\r\n    dataList(newList) {\r\n      if (newList.length === 0) return\r\n      this.rowNum = Math.ceil(this.dataList.length / this.eachRowNum)\r\n    }\r\n  },\r\n  computed: {\r\n    eachRowList() {\r\n      let list = []\r\n      for (let i = 0; i < this.eachRowNum; i++) {\r\n        let temp = []\r\n        if ((i + 1) * this.eachRowNum > this.dataList.length) {\r\n          temp = this.dataList.slice(i)\r\n        } else {\r\n          temp = this.dataList.slice(i * this.eachRowNum, (i + 1) * this.eachRowNum)\r\n        }\r\n        list.push(temp)\r\n      }\r\n      return list\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/stylus/variables';\r\n@import '~common/stylus/reset';\r\n\r\n.grid-container {\r\n  overflow: hidden;\r\n\r\n  .mv-item-container {\r\n    margin: 0 auto;\r\n\r\n    .mv-item {\r\n      margin-top: 15px;\r\n\r\n      .pic {\r\n        width: 180px;\r\n        height: 101px;\r\n        position: relative;\r\n\r\n        img {\r\n          width: 180px;\r\n          border-radius: 3px;\r\n        }\r\n\r\n        .block-layer {\r\n          width: 100%;\r\n          height: 100%;\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          font-size: $font-size-big;\r\n          color: $grey-color;\r\n          background-color: $firstly-text-transparent;\r\n          border-radius: 3px;\r\n\r\n          .layer-play {\r\n            position: absolute;\r\n            left: 50%;\r\n            top: 50%;\r\n            transform: translate(-50%, -50%);\r\n          }\r\n        }\r\n      }\r\n\r\n      .mv-name, .mv-singer {\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n        font-size: $font-size-small;\r\n        color: $secondary-text;\r\n        margin-top: 5px;\r\n        margin-right: 12px;\r\n      }\r\n\r\n      .mv-name {\r\n        color: $dark-primary-color;\r\n      }\r\n    }\r\n\r\n    .mv-item:hover {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/base/mv-grid/mv-grid.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{staticClass:\"grid-container\"},_vm._l((_vm.rowNum),function(idx1){return _c('el-row',{key:idx1,staticClass:\"mv-item-container\"},_vm._l((_vm.eachRowList[idx1-1]),function(item,idx2){return _c('el-col',{key:idx2,staticClass:\"mv-item\",attrs:{\"span\":24/_vm.eachRowNum},nativeOn:{\"mouseenter\":function($event){return _vm.displayBlock(idx1,idx2)},\"mouseleave\":function($event){return _vm.hideBlock($event)},\"click\":function($event){return _vm.selected(item)}}},[_c('div',{staticClass:\"pic\"},[_c('img',{attrs:{\"src\":item.picUrl}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(idx1===_vm.displayIdx1&&idx2===_vm.displayIdx2),expression:\"idx1===displayIdx1&&idx2===displayIdx2\"}],staticClass:\"block-layer\"},[_c('p',{staticClass:\"layer-play iconfont icon-zanting\"})])]),_vm._v(\" \"),_c('p',{staticClass:\"mv-name\",attrs:{\"title\":item.name}},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{staticClass:\"mv-singer\",attrs:{\"title\":item.singer}},[_vm._v(_vm._s(item.singer))])])}),1)}),1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3abcd334\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/base/mv-grid/mv-grid.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3abcd334\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./mv-grid.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./mv-grid.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./mv-grid.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3abcd334\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./mv-grid.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3abcd334\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/mv-grid/mv-grid.vue\n// module id = null\n// module chunks = ","// eslint-disable-next-line space-before-function-paren\r\n\r\nimport {\r\n  searchCategory\r\n} from 'common/js/config'\r\nimport {\r\n  splitSingersInObj\r\n} from 'api/kit'\r\nimport Song from 'common/js/song'\r\nimport Singer from 'common/js/singer'\r\nimport SongList from 'common/js/songList'\r\nimport Album from 'common/js/album'\r\nimport MV from 'common/js/mv'\r\n\r\nexport default class Record {\r\n  constructor ({\r\n    count,\r\n    category,\r\n    data\r\n  }) {\r\n    this.count = count\r\n    this.category = category\r\n    this.data = data\r\n  }\r\n\r\n  analyzeSearchData (category) {\r\n    let ret = []\r\n    if (this.category === searchCategory.song) {\r\n      if (category === searchCategory.song) {\r\n        this.data.forEach((item) => {\r\n          let songObj = {}\r\n          songObj.name = item.name\r\n          songObj.singer = splitSingersInObj(item.ar)\r\n          songObj.id = item.id\r\n          songObj.album = item.al.name\r\n          songObj.duration = item.dt\r\n          songObj.albumPic = item.al.picUrl\r\n          songObj.albumId = item.al.id\r\n          ret.push(new Song(songObj))\r\n        })\r\n        return ret\r\n      }\r\n    }\r\n    if (category === searchCategory.singer) {\r\n      this.data.forEach((item) => {\r\n        let singerObj = {}\r\n        singerObj.name = item.name\r\n        singerObj.id = item.id\r\n        singerObj.img1v1Url = item.img1v1Url\r\n        ret.push(new Singer(singerObj))\r\n      })\r\n      return ret\r\n    }\r\n    if (category === searchCategory.songList) {\r\n      this.data.forEach((item) => {\r\n        let songListObj = {}\r\n        songListObj.name = item.name\r\n        songListObj.id = item.id\r\n        songListObj.picUrl = item.coverImgUrl\r\n        songListObj.desc = item.description\r\n        ret.push(new SongList(songListObj))\r\n      })\r\n      return ret\r\n    }\r\n    if (category === searchCategory.album) {\r\n      this.data.forEach((item) => {\r\n        let AlbumObj = {}\r\n        AlbumObj.name = item.name\r\n        AlbumObj.id = item.id\r\n        AlbumObj.picUrl = item.picUrl\r\n        AlbumObj.desc = item.description\r\n        AlbumObj.company = item.company\r\n        AlbumObj.singer = splitSingersInObj(item.artists)\r\n        ret.push(new Album(AlbumObj))\r\n      })\r\n      return ret\r\n    }\r\n    if (category === searchCategory.mv) {\r\n      this.data.forEach((item) => {\r\n        let mvObj = {}\r\n        mvObj.name = item.name\r\n        mvObj.id = item.id\r\n        mvObj.cover = item.cover\r\n        mvObj.singer = splitSingersInObj(item.artists)\r\n        ret.push(new MV(mvObj))\r\n      })\r\n      return ret\r\n    }\r\n  }\r\n}\r\n\r\nexport const SONG_PER_PAGE = 50\r\nexport const OTHERS_PER_PAGE = 24\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/record.js","<template>\r\n  <el-row class=\"result-container\">\r\n    <el-col class=\"not-found iconfont icon-shanchu\" v-if=\"isNotFound\">&nbsp;服务器上没有相关资源</el-col>\r\n    <el-col class=\"loading-box\" v-show=\"isLoading\" v-loading=\"isLoading\"></el-col>\r\n    <el-col class=\"result\" v-show=\"!isNotFound&&!isLoading\">\r\n      <el-row class=\"record-count\">\r\n        <el-col :span=\"21\" :push=\"3\">共找到\"{{searchKeywords}}\"相关的记录共{{recordCount}}条</el-col>\r\n      </el-row>\r\n      <el-col v-if=\"searchCategory===1\" :push=\"3\" :span=\"18\">\r\n        <list :dataList=\"displayList\"/>\r\n      </el-col>\r\n      <el-col v-if=\"searchCategory===2||searchCategory===3||searchCategory===4\" :push=\"3\" :span=\"18\">\r\n        <grid\r\n          :dataList=\"displayList\"\r\n          :each-length=\"eachLength\"\r\n          @selected=\"selected\"\r\n          :isTag=\"isTag\"\r\n        />\r\n      </el-col>\r\n      <el-col v-if=\"searchCategory===5\" :push=\"3\" :span=\"18\">\r\n        <mv-grid :dataList=\"displayList\" @selected=\"selectedMV\"/>\r\n      </el-col>\r\n      <el-col class=\"pager\" :push=\"3\">\r\n        <pagination :total=\"searchResult.count\" :pageSize=\"perPage\"/>\r\n      </el-col>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations } from 'vuex'\r\nimport { ERR_OK } from 'api/config'\r\nimport { search } from 'api/search'\r\nimport Record from 'common/js/record'\r\nimport { SONG_PER_PAGE, OTHERS_PER_PAGE } from 'common/js/record'\r\nimport List from 'base/list/list'\r\nimport Grid from 'base/grid/grid'\r\nimport MvGrid from 'base/mv-grid/mv-grid'\r\nimport Pagination from 'base/pagination/pagination'\r\nimport { searchCategory } from 'common/js/config'\r\n\r\nexport default {\r\n  created() {\r\n    if (!this.searchKeywords.length || !this.searchCategory) {\r\n      this.$emit('turenBack')\r\n      return\r\n    }\r\n    this._search(this.searchKeywords, this.searchCategory, 0, this.perPage)\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      if (!vm.searchKeywords.length || !vm.searchCategory) {\r\n        vm.$router.push({\r\n          path: '/search'\r\n        })\r\n        return\r\n      }\r\n      vm.setCurrentPage(1)\r\n    })\r\n  },\r\n  data() {\r\n    return {\r\n      pagerDisplay: 0,\r\n      isNotFound: false,\r\n      recordCount: 0,\r\n      displayList: [],\r\n      isLoading: true,\r\n      eachLength: 3\r\n    }\r\n  },\r\n  methods: {\r\n    _search(keywords, category, page, perPage) {\r\n      this.isLoading = true\r\n      search(keywords, category, page, perPage).then(res => {\r\n        if (res.data.code === ERR_OK && res.data.data) {\r\n          this.dataHandler(res.data.data)\r\n          this.displayList = this.searchResult.analyzeSearchData(category)\r\n          this.isLoading = false\r\n        } else {\r\n          this.isLoading = false\r\n          this.isNotFound = true\r\n          this.setSearchResult({})\r\n        }\r\n      })\r\n    },\r\n    dataHandler(data) {\r\n      const result = data\r\n      this.recordCount =\r\n        result.songCount ||\r\n        result.artistCount ||\r\n        result.playlistCount ||\r\n        result.albumCount ||\r\n        result.mvCount ||\r\n        0\r\n      const dataArr =\r\n        result.songs ||\r\n        result.artists ||\r\n        result.playlists ||\r\n        result.albums ||\r\n        result.mvs\r\n      this.setSearchResult(\r\n        new Record({\r\n          count: this.recordCount,\r\n          category: this.searchCategory,\r\n          data: dataArr\r\n        })\r\n      )\r\n    },\r\n    selected(item) {\r\n      if (this.searchCategory === searchCategory.singer) {\r\n        this.setSinger(item)\r\n        this.$router.push({\r\n          path: `/singer/${item.id}`\r\n        })\r\n      }\r\n      if (this.searchCategory === searchCategory.songList) {\r\n        this.setSongList(item)\r\n        this.$router.push({\r\n          path: `/songlist/${item.id}`\r\n        })\r\n      }\r\n      if (this.searchCategory === searchCategory.album) {\r\n        this.setAlbum(item)\r\n        this.$router.push({\r\n          path: `/albumdetail/${item.id}`\r\n        })\r\n      }\r\n      if (this.searchCategory === searchCategory.album) {\r\n        this.setAlbum(item)\r\n        this.$router.push({\r\n          path: `/albumdetail/${item.id}`\r\n        })\r\n      }\r\n    },\r\n    selectedMV(mv) {\r\n      // 新增的MV查找功能\r\n      this.setCurrentMV(mv)\r\n      this.$router.push({\r\n        path: `/mvdetail/${mv.id}`\r\n      })\r\n    },\r\n    ...mapMutations({\r\n      setSearchResult: 'SET_SEARCH_RESULT',\r\n      setSinger: 'SET_SINGER',\r\n      setSongList: 'SET_CURRENT_SONG_LIST',\r\n      setAlbum: 'SET_CURRENT_ALBUM',\r\n      setMV: 'SET_CURRENT_MV',\r\n      setCurrentPage: 'SET_CURRENT_PAGE',\r\n      setCurrentMV:'SET_CURRENT_MV'\r\n    })\r\n  },\r\n  watch: {\r\n    currentPage(newVal) {\r\n      this._search(\r\n        this.searchKeywords,\r\n        this.searchCategory,\r\n        newVal,\r\n        this.perPage\r\n      )\r\n    },\r\n    searchKeywords(newVal) {\r\n      this._search(newVal, this.searchCategory, 0, this.perPage)\r\n    },\r\n    searchCategory(newVal) {\r\n      this._search(this.searchKeywords, newVal, 0, this.perPage)\r\n    }\r\n  },\r\n  computed: {\r\n    perPage() {\r\n      return this.searchCategory === searchCategory.song\r\n        ? SONG_PER_PAGE\r\n        : OTHERS_PER_PAGE\r\n    },\r\n    isTag() {\r\n      return this.searchCategory === searchCategory.album\r\n    },\r\n    ...mapGetters([\r\n      'searchKeywords',\r\n      'searchCategory',\r\n      'currentPage',\r\n      'searchResult'\r\n    ])\r\n  },\r\n  components: {\r\n    List,\r\n    Grid,\r\n    Pagination,\r\n    MvGrid\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/stylus/variables.styl';\r\n@import '~common/stylus/reset.styl';\r\n\r\n.result-container {\r\n  overflow: hidden;\r\n\r\n  .not-found {\r\n    text-align: center;\r\n    margin: 20px auto;\r\n    color: $dark-primary-color;\r\n    font-size: $font-size-mid;\r\n  }\r\n\r\n  .result {\r\n    .record-count {\r\n      color: $dark-primary-color;\r\n      font-size: $font-size-small;\r\n      margin: 4px 0;\r\n    }\r\n  }\r\n\r\n  .pager {\r\n    margin-top: 18px;\r\n  }\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/result-display/result-display.vue","/* eslint-disable space-before-function-paren */\r\nimport {\r\n  baseUrl\r\n} from './config'\r\nimport axios from 'axios'\r\nimport {\r\n  concatUrl\r\n} from './kit'\r\nimport {\r\n  searchCategory\r\n} from 'common/js/config'\r\n\r\nexport function search(keywords, category, page, pageSize) {\r\n  const url = baseUrl + 'netease/search'\r\n  const data = {\r\n    keyword: keywords,\r\n    type: category === searchCategory.song ? 'song' : category === searchCategory.singer ? 'singer' : category === searchCategory.album ? 'album' : category === searchCategory.songList ? 'songList' : 'mv',\r\n    page: page * pageSize || 0,\r\n    pageSize: pageSize\r\n  }\r\n  return axios.get(concatUrl(url, data))\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/search.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{staticClass:\"result-container\"},[(_vm.isNotFound)?_c('el-col',{staticClass:\"not-found iconfont icon-shanchu\"},[_vm._v(\" 服务器上没有相关资源\")]):_vm._e(),_vm._v(\" \"),_c('el-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoading),expression:\"isLoading\"},{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"loading-box\"}),_vm._v(\" \"),_c('el-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isNotFound&&!_vm.isLoading),expression:\"!isNotFound&&!isLoading\"}],staticClass:\"result\"},[_c('el-row',{staticClass:\"record-count\"},[_c('el-col',{attrs:{\"span\":21,\"push\":3}},[_vm._v(\"共找到\\\"\"+_vm._s(_vm.searchKeywords)+\"\\\"相关的记录共\"+_vm._s(_vm.recordCount)+\"条\")])],1),_vm._v(\" \"),(_vm.searchCategory===1)?_c('el-col',{attrs:{\"push\":3,\"span\":18}},[_c('list',{attrs:{\"dataList\":_vm.displayList}})],1):_vm._e(),_vm._v(\" \"),(_vm.searchCategory===2||_vm.searchCategory===3||_vm.searchCategory===4)?_c('el-col',{attrs:{\"push\":3,\"span\":18}},[_c('grid',{attrs:{\"dataList\":_vm.displayList,\"each-length\":_vm.eachLength,\"isTag\":_vm.isTag},on:{\"selected\":_vm.selected}})],1):_vm._e(),_vm._v(\" \"),(_vm.searchCategory===5)?_c('el-col',{attrs:{\"push\":3,\"span\":18}},[_c('mv-grid',{attrs:{\"dataList\":_vm.displayList},on:{\"selected\":_vm.selectedMV}})],1):_vm._e(),_vm._v(\" \"),_c('el-col',{staticClass:\"pager\",attrs:{\"push\":3}},[_c('pagination',{attrs:{\"total\":_vm.searchResult.count,\"pageSize\":_vm.perPage}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-68f74b40\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/result-display/result-display.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-68f74b40\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./result-display.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./result-display.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./result-display.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-68f74b40\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./result-display.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-68f74b40\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/result-display/result-display.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}