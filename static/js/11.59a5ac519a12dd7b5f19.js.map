{"version":3,"sources":["webpack:///src/components/album-detail/album-detail.vue","webpack:///./src/api/album.js","webpack:///./src/components/album-detail/album-detail.vue?1990","webpack:///./src/components/album-detail/album-detail.vue"],"names":["album_detail","beforeRouteEnter","to","from","next","vm","undefined","currentAlbum","id","$router","push","path","albumId","_getAlbumDetail","data","singerDesc","songList","isLoading","ops","bar","background","computed","extends_default","Object","vuex_esm","methods","_this","this","url","baseUrl","format","axios","get","concatUrl","getAlbumDetail","then","res","code","config","giveAlbumCompany","album","company","giveAlbumDesc","description","songs","i","length","song","thisSong","name","singer","kit","ar","duration","dt","albumPic","picUrl","js_song","playAll","replacePlayList","list","refreshAlbum","components","List","PlayButton","play_button","vuescroll","vuescroll_native_default","a","album_detail_album_detail","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","expression","_e","_v","attrs","span","src","domProps","innerHTML","_s","desc","replace","nativeOn","click","$event","dataList","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.59a5ac519a12dd7b5f19.js","sourcesContent":["<template>\r\n  <el-row class=\"detail-container\">\r\n    <el-col class=\"loading-box\" v-if=\"isLoading\" v-loading=\"isLoading\"></el-col>\r\n    <el-col class=\"info\" v-if=\"!isLoading\">\r\n      <el-row>\r\n        <el-col class=\"img\" :push=\"3\" :span=\"4\">\r\n          <img :src=\"currentAlbum.picUrl\">\r\n        </el-col>\r\n        <el-col class=\"introduction\" :push=\"3\" :span=\"14\">\r\n          <div class=\"text-container\">\r\n            <vuescroll :ops=\"ops\">\r\n              <div\r\n                v-html=\"currentAlbum.desc===''?'暂无专辑介绍':currentAlbum.desc.replace(/\\n/g,'<br/>')\"\r\n                class=\"text\"\r\n              ></div>\r\n            </vuescroll>\r\n            <div class=\"tag\">{{currentAlbum.name}}&nbsp;&nbsp;</div>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-col>\r\n    <el-col class=\"song-container\" v-if=\"!isLoading\">\r\n      <el-row>\r\n        <el-col :push=\"3\" :span=\"18\">\r\n          <play-button @click.native=\"playAll\"/>\r\n          <list :dataList=\"songList\"/>\r\n        </el-col>\r\n      </el-row>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations, mapActions } from 'vuex'\r\nimport { getAlbumDetail } from 'api/album'\r\nimport { ERR_OK } from 'api/config'\r\nimport { splitSingersInObj } from 'api/kit'\r\nimport Song from 'common/js/song'\r\nimport vuescroll from 'vuescroll/dist/vuescroll-native'\r\n\r\nimport PlayButton from 'base/m-button/play-button'\r\nimport List from 'base/list/list'\r\n\r\nexport default {\r\n  beforeRouteEnter(to, from, next) {\r\n    // 避免组件复用\r\n    next(vm => {\r\n      if (vm.currentAlbum.id === undefined) {\r\n        vm.$router.push({\r\n          path: `/recommend`\r\n        })\r\n      }\r\n      if (vm.albumId === '' || vm.albumId !== vm.currentAlbum.id) {\r\n        vm._getAlbumDetail(vm.currentAlbum.id)\r\n      }\r\n    })\r\n  },\r\n  data() {\r\n    return {\r\n      singerDesc: '',\r\n      songList: [],\r\n      albumId: '',\r\n      isLoading: true,\r\n      ops: {\r\n        bar: {\r\n          background: '#D32F2F'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentAlbum'])\r\n  },\r\n  methods: {\r\n    _getAlbumDetail(id) {\r\n      getAlbumDetail(id).then(res => {\r\n        if ((res.code = ERR_OK)) {\r\n          this.songList = []\r\n          this.albumId = id\r\n          this.giveAlbumCompany(res.data.data.album.company)\r\n          this.giveAlbumDesc(res.data.data.album.description)\r\n          let songList = res.data.data.songs\r\n          for (let i = 0; i < songList.length; i++) {\r\n            let song = {}\r\n            let thisSong = songList[i]\r\n            song.name = thisSong.name\r\n            song.id = thisSong.id\r\n            song.singer = splitSingersInObj(thisSong.ar)\r\n            song.duration = thisSong.dt\r\n            song.album = this.currentAlbum.name\r\n            song.albumId = this.currentAlbum.id\r\n            song.albumPic = this.currentAlbum.picUrl\r\n            this.songList.push(new Song(song))\r\n            this.isLoading = false\r\n          }\r\n        }\r\n      })\r\n    },\r\n    playAll() {\r\n      this.replacePlayList({ list: this.songList })\r\n    },\r\n    refreshAlbum(id) {},\r\n    ...mapMutations({\r\n      giveAlbumCompany: 'GIVE_ALBUM_COMPANY',\r\n      giveAlbumDesc: 'GIVE_ALBUM_DESC'\r\n    }),\r\n    ...mapActions(['addToList', 'replacePlayList'])\r\n  },\r\n  components: {\r\n    List,\r\n    PlayButton,\r\n    vuescroll\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/stylus/variables.styl';\r\n@import '~common/stylus/reset.styl';\r\n\r\n.detail-container {\r\n  overflow: hidden;\r\n\r\n  .info {\r\n    min-width: 1290px;\r\n\r\n    .introduction {\r\n      .text-container {\r\n        height: 140px;\r\n      }\r\n\r\n      .tag {\r\n        text-align: right;\r\n        margin-top: 10px;\r\n        margin-left: 5px;\r\n        border-bottom: 2px solid $dark-primary-color;\r\n      }\r\n    }\r\n\r\n    .el-col {\r\n      height: 200px;\r\n      background-color: $grey-color;\r\n      border-radius: 5px;\r\n      position: relative;\r\n    }\r\n\r\n    .text-container {\r\n      font-size: $font-size-small;\r\n      height: 180px;\r\n      color: $firstly-text;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n      position: absolute;\r\n\r\n      .text {\r\n        margin: 0px 20px;\r\n        min-width: 714px;\r\n      }\r\n    }\r\n\r\n    img {\r\n      width: 180px;\r\n      height: 180px;\r\n      border-radius: 3px;\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 10px;\r\n      transform: translateY(-50%);\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/album-detail/album-detail.vue","/* eslint-disable space-before-function-paren */\r\nimport {\r\n  baseUrl\r\n} from './config'\r\nimport axios from 'axios'\r\nimport {\r\n  concatUrl\r\n} from './kit'\r\n\r\nexport function getAlbumDetail(id) {\r\n  const url = baseUrl + 'netease/album'\r\n  const data = {\r\n    format: 0,\r\n    id: id\r\n  }\r\n  return axios.get(concatUrl(url, data))\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/album.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{staticClass:\"detail-container\"},[(_vm.isLoading)?_c('el-col',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"loading-box\"}):_vm._e(),_vm._v(\" \"),(!_vm.isLoading)?_c('el-col',{staticClass:\"info\"},[_c('el-row',[_c('el-col',{staticClass:\"img\",attrs:{\"push\":3,\"span\":4}},[_c('img',{attrs:{\"src\":_vm.currentAlbum.picUrl}})]),_vm._v(\" \"),_c('el-col',{staticClass:\"introduction\",attrs:{\"push\":3,\"span\":14}},[_c('div',{staticClass:\"text-container\"},[_c('vuescroll',{attrs:{\"ops\":_vm.ops}},[_c('div',{staticClass:\"text\",domProps:{\"innerHTML\":_vm._s(_vm.currentAlbum.desc===''?'暂无专辑介绍':_vm.currentAlbum.desc.replace(/\\n/g,'<br/>'))}})]),_vm._v(\" \"),_c('div',{staticClass:\"tag\"},[_vm._v(_vm._s(_vm.currentAlbum.name)+\"  \")])],1)])],1)],1):_vm._e(),_vm._v(\" \"),(!_vm.isLoading)?_c('el-col',{staticClass:\"song-container\"},[_c('el-row',[_c('el-col',{attrs:{\"push\":3,\"span\":18}},[_c('play-button',{nativeOn:{\"click\":function($event){return _vm.playAll($event)}}}),_vm._v(\" \"),_c('list',{attrs:{\"dataList\":_vm.songList}})],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-cabb6220\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/album-detail/album-detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cabb6220\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./album-detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./album-detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./album-detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cabb6220\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./album-detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cabb6220\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/album-detail/album-detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}