{"version":3,"sources":["webpack:///src/components/search/search.vue","webpack:///./src/components/search/search.vue?bb72","webpack:///./src/components/search/search.vue"],"names":["search","data","keywords","category","deleteTips","options","value","config","song","label","singer","songList","album","mv","methods","extends_default","getSearchHistory","queryString","cb","this","searchHistory","results","filter","createFilter","length","unshift","history","toLowerCase","indexOf","beginSearch","$message","message","type","setKeywords","setCategory","_saveSearchHistory","query","$router","push","path","deleteHistory","item","empty","Object","vuex_esm","computed","search_search","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","span","fetch-suggestions","placeholder","size","clearable","prefix-icon","on","select","model","callback","$$v","expression","_l","key","nativeOn","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.b94c9e0a8b60bd0d674f.js","sourcesContent":["<template>\r\n  <el-row>\r\n    <el-col class=\"search-container\">\r\n      <el-row class=\"search-header\">\r\n        <el-col>全局搜索</el-col>\r\n      </el-row>\r\n      <el-row class=\"search-body\">\r\n        <el-col class=\"body-keywords\" :span=\"8\" :push=\"2\">\r\n          <el-autocomplete\r\n            class=\"inline-input\"\r\n            v-model=\"keywords\"\r\n            :fetch-suggestions=\"getSearchHistory\"\r\n            placeholder=\"请输入搜索关键字\"\r\n            size=\"mini\"\r\n            :clearable=\"true\"\r\n            @select=\"deleteHistory\"\r\n            prefix-icon=\"el-icon-search\"\r\n          ></el-autocomplete>\r\n        </el-col>\r\n        <el-col class=\"body-category\" :span=\"6\" :push=\"11\">\r\n          <el-select v-model=\"category\" size=\"mini\">\r\n            <el-option\r\n              v-for=\"item in options\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-col>\r\n        <el-col class=\"search-btn\" :span=\"6\" :push=\"20\">\r\n          <el-button type=\"danger\" size=\"mini\" @click.native=\"beginSearch(keywords)\">搜索</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions, mapMutations } from 'vuex'\r\nimport { searchCategory } from 'common/js/config'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      keywords: '',\r\n      category: '',\r\n      deleteTips: '清空搜索记录',\r\n      options: [\r\n        {\r\n          value: searchCategory.song,\r\n          label: '单曲'\r\n        },\r\n        {\r\n          value: searchCategory.singer,\r\n          label: '歌手'\r\n        },\r\n        {\r\n          value: searchCategory.songList,\r\n          label: '歌单'\r\n        },\r\n        {\r\n          value: searchCategory.album,\r\n          label: '专辑'\r\n        },\r\n        {\r\n          value: searchCategory.mv,\r\n          label: 'MV'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    getSearchHistory(queryString, cb) {\r\n      let history = this.searchHistory\r\n      let results = queryString\r\n        ? this.searchHistory.filter(this.createFilter(queryString))\r\n        : this.searchHistory\r\n      if (this.searchHistory.length) {\r\n        if (this.searchHistory[0].value !== this.deleteTips)\r\n          results.unshift({ value: this.deleteTips })\r\n      }\r\n      cb(results)\r\n    },\r\n    createFilter(queryString) {\r\n      return history => {\r\n        return (\r\n          history.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0\r\n        )\r\n      }\r\n    },\r\n    beginSearch(keywords) {\r\n      if (keywords === '') {\r\n        this.$message({\r\n          message: '检索内容不可为空',\r\n          type: 'error'\r\n        })\r\n        return\r\n      }\r\n      if (keywords.length > 24) {\r\n        this.$message({\r\n          message: '检索内容过长,请提取必要关键字',\r\n          type: 'error'\r\n        })\r\n        return\r\n      }\r\n      if (this.category === '') {\r\n        this.$message({\r\n          message: '您还未选择检索类别',\r\n          type: 'error'\r\n        })\r\n        return\r\n      }\r\n      this.setKeywords(keywords), this.setCategory(this.category)\r\n      this._saveSearchHistory({ query: keywords })\r\n      this.$router.push({\r\n        path: `/searchresult/${keywords}/${this.category}`\r\n      })\r\n    },\r\n    deleteHistory(item) {\r\n      if (item.value === this.deleteTips) {\r\n        this._saveSearchHistory({ empty: true })\r\n        this.keywords = ''\r\n      }\r\n    },\r\n    ...mapActions(['_saveSearchHistory']),\r\n    ...mapMutations({\r\n      setKeywords: 'SET_SEARCH_KEYWORDS',\r\n      setCategory: 'SET_SEARCH_CATEGORY'\r\n    })\r\n  },\r\n  computed: {\r\n    ...mapGetters(['searchHistory', 'searchKeywords', 'searchCategory'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/stylus/variables';\r\n@import '~common/stylus/reset';\r\n\r\n.search-container {\r\n  overflow: hidden;\r\n\r\n  .search-header {\r\n    margin: 0 auto;\r\n    width: 600px;\r\n    height: 150px;\r\n    line-height: 150px;\r\n    color: $grey-color;\r\n    font-size: $font-size-ultra;\r\n    text-align: center;\r\n    background: url('../../common/image/search-bg.jpg');\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .search-body {\r\n    margin: 0 auto;\r\n    width: 600px;\r\n    height: 150px;\r\n    background-color: $grey-color;\r\n    margin-top: 15px;\r\n    border-radius: 5px;\r\n\r\n    .el-col {\r\n      height: 150px;\r\n      position: relative;\r\n    }\r\n\r\n    .body-keywords, .search-btn, .body-category {\r\n      position: absolute;\r\n      top: 50%;\r\n      margin-top: -14px;\r\n\r\n      .el-input {\r\n        font-size: $font-size-mid;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.el-select-dropdown__item {\r\n  font-size: $font-size-small;\r\n  text-align: center;\r\n}\r\n\r\n.el-button {\r\n  background-color: $dark-primary-color;\r\n  border: none;\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',[_c('el-col',{staticClass:\"search-container\"},[_c('el-row',{staticClass:\"search-header\"},[_c('el-col',[_vm._v(\"全局搜索\")])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"search-body\"},[_c('el-col',{staticClass:\"body-keywords\",attrs:{\"span\":8,\"push\":2}},[_c('el-autocomplete',{staticClass:\"inline-input\",attrs:{\"fetch-suggestions\":_vm.getSearchHistory,\"placeholder\":\"请输入搜索关键字\",\"size\":\"mini\",\"clearable\":true,\"prefix-icon\":\"el-icon-search\"},on:{\"select\":_vm.deleteHistory},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"body-category\",attrs:{\"span\":6,\"push\":11}},[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.category),callback:function ($$v) {_vm.category=$$v},expression:\"category\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"search-btn\",attrs:{\"span\":6,\"push\":20}},[_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},nativeOn:{\"click\":function($event){return _vm.beginSearch(_vm.keywords)}}},[_vm._v(\"搜索\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-27321ec0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-27321ec0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-27321ec0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-27321ec0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}