webpackJsonp([8],{W3aC:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("4YfN"),i=s.n(a),n=(s("sRVW"),s("AcUZ"),s("T452")),r=s("Gdqy"),l=s("2bvH"),o=s("vfYU"),c=s("84iU"),u=s.n(c),v={beforeRouteEnter:function(e,t,s){s(function(e){e.currentMV.id?(0===e.$refs.videoPlayer.readyState&&(e.isLoading=!0),e.mvId=e.currentMV.id,e.blockerDisplay=!0,e.setMVMode(!0)):e.$emit("turnBack")})},data:function(){return{isLoading:!0,loadingText:"视频资源加载中",blockerColor:"#eeeeee",mvId:0,progress:0,mvPlaying:!1,currentTime:"00:00",blockerDisplay:!0,volumeDisplay:!1,volume:100,volDisplay:!1}},methods:i()({_getMV:function(e){var t=this;Object(o.a)(e).then(u.a.spread(function(e,s){if(e.data.code===n.a&&s.data.code===n.a){var a=e.data.data.data,i=s.data.data,r=t.currentMV;t.setCurrentMV({}),r.duration=a.duration,r.desc=a.desc,r.url=i,t.setCurrentMV(r)}}))},videoReady:function(){var e=this,t=setTimeout(function(){e.isLoading=!1,clearTimeout(t)},1e3)},togglePlaying:function(){if(!this.isLoading){var e=this.$refs.videoPlayer;this.mvPlaying?(e.pause(),this.mvPlaying=!1):(this.blockerDisplay=!1,e.play(),this.mvPlaying=!0)}},toggleVolume:function(){this.volumeDisplay=!this.volumeDisplay},sliderUpdate:function(){var e=this.$refs.videoPlayer;this.progress=1e3*e.currentTime/this.currentMV.duration*100,this.currentTime=Object(r.i)(1e3*e.currentTime)},_transTime:function(e){return Object(r.i)(e)},mouseChange:function(e){var t=this.$refs.videoPlayer,s=e/100*this.currentMV.duration/1e3;this.mvPlaying?(t.pause(),t.currentTime=s,t.play()):t.currentTime=s},videoPause:function(){this.mvPlaying?(this.$refs.videoPlayer.pause(),this.mvPlaying=!1):(this.$refs.videoPlayer.play(),this.mvPlaying=!0)},lauchFullScreen:function(){var e=this.$refs.videoPlayer;e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},hideBlocker:function(){this.blockerDisplay=!1,this.mvPlaying=!0,this.$refs.videoPlayer.play()},videoEnded:function(){this.blockerDisplay=!0,this.mvPlaying=!1}},Object(l.d)({setCurrentMV:"SET_CURRENT_MV",setMVMode:"SET_MV_MODE"})),watch:{mvId:function(e){e&&this._getMV(e)},volume:function(e){var t=e/100;this.$refs.videoPlayer.volume=t}},computed:i()({playBtnClass:function(){return["iconfont",{"icon-zanting":!this.mvPlaying,"icon-bofang":this.mvPlaying}]}},Object(l.c)(["currentMV"])),beforeRouteLeave:function(e,t,s){this.$refs.videoPlayer.pause(),this.$refs.videoPlayer.currentTime=0,this.mvPlaying=!1,this.setMVMode(!1),s()}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{staticClass:"player-container"},[e.isLoading?s("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"video-loading-box",attrs:{"element-loading-text":e.loadingText,"element-loading-background":e.blockerColor}}):e._e(),e._v(" "),s("el-col",{staticClass:"title-container",attrs:{span:18,push:3}},[s("div",{staticClass:"mv-title",attrs:{title:e.currentMV.name}},[e._v(e._s(e.currentMV.name))]),e._v(" "),s("div",{staticClass:"mv-singer",attrs:{title:e.currentMV.singer}},[e._v(e._s(e.currentMV.singer))])]),e._v(" "),s("el-col",{staticClass:"video-player",attrs:{span:18,push:3}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.blockerDisplay,expression:"blockerDisplay"}],staticClass:"block-layer",on:{click:e.hideBlocker}},[s("p",{staticClass:"block-text iconfont icon-zanting"},[e._v(" 开始播放")])]),e._v(" "),s("video",{ref:"videoPlayer",attrs:{src:e.currentMV.url},on:{canplay:e.videoReady,ended:e.videoEnded,timeupdate:e.sliderUpdate,click:e.videoPause}})]),e._v(" "),s("el-col",{staticClass:"video-control",attrs:{span:18,push:3}},[s("el-row",[s("el-col",{staticClass:"volume",attrs:{span:1}},[s("div",{staticClass:"iconfont icon-shengyin",on:{click:e.toggleVolume}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.volumeDisplay,expression:"volumeDisplay"}],staticClass:"volume-adjust"},[s("div",{staticClass:"block"},[s("el-slider",{staticClass:"volume-slider",attrs:{vertical:""},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}})],1)])]),e._v(" "),s("el-col",{staticClass:"play",attrs:{span:1},nativeOn:{click:function(t){return e.togglePlaying(t)}}},[s("div",{class:e.playBtnClass})]),e._v(" "),s("el-col",{staticClass:"control-bar",attrs:{span:16}},[s("el-slider",{staticClass:"slider-body",attrs:{"show-tooltip":!1},on:{change:e.mouseChange},model:{value:e.progress,callback:function(t){e.progress=t},expression:"progress"}})],1),e._v(" "),s("el-col",{staticClass:"time",attrs:{span:4}},[s("span",{staticClass:"current-time"},[e._v(e._s(e.currentTime))]),e._v(" "),s("span",{staticClass:"total-time"},[e._v("/ "+e._s(e.currentMV.duration?e._transTime(e.currentMV.duration):"00:00"))])]),e._v(" "),s("el-col",{staticClass:"full-screen",attrs:{span:2},nativeOn:{click:function(t){return e.lauchFullScreen(t)}}},[e._v("全屏")])],1)],1),e._v(" "),s("el-col",{staticClass:"desc-title",attrs:{span:18,push:3}},[e._v("视频简介")]),e._v(" "),s("el-col",{staticClass:"desc-container",attrs:{span:18,push:3}},[e._v(e._s(""===e.currentMV.desc?"暂无视频介绍。":e.currentMV.desc))])],1)},staticRenderFns:[]};var m=s("C7Lr")(v,d,!1,function(e){s("aBTe")},"data-v-287c05e0",null);t.default=m.exports},aBTe:function(e,t){},vfYU:function(e,t,s){"use strict";t.b=function(e,t){var s=a.b+"netease/mv/top",i={pageSize:t,page:e*t};return n.a.get(Object(r.b)(s,i))},t.a=function(e){return n.a.all([function(e){var t=a.b+"netease/mv",s={id:e};return n.a.get(Object(r.b)(t,s))}(e),function(e){var t=a.b+"netease/mvUrl",s={id:e,isRedirect:0,quality:720};return n.a.get(Object(r.b)(t,s))}(e)])};var a=s("T452"),i=s("84iU"),n=s.n(i),r=s("Gdqy")}});
//# sourceMappingURL=8.3e9203e4b6cb863772a3.js.map